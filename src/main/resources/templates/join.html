<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/img/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/img/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/img/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/img/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/img/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/img/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/img/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">


    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원가입</title>
    <style>
        #top_btn {
           position: fixed;
           bottom: 20px; /* 원하는 위치로 조정 */
           right: 20px; /* 원하는 위치로 조정 */
           border: none;
           padding: 3px;
           cursor: pointer;
           transition: background-color 0.3s;
             }

              /* 기본 스타일 */
              body, html {
                  margin: 0;
                  padding: 0;
                  font-family: Arial, sans-serif;
                  height: 100%;
                  background: url('/img/health.png') no-repeat center center fixed; /* 배경화면 설정 */
                  background-size: cover;
              }


             /* 고정된 상단 메뉴바 */
              .navbar {
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  background-color: transparent; /* 초기 배경색은 투명 */
                  transition: background-color 0.3s; /* 부드러운 색상 전환 */
                  padding: 8px 20px;
                  height: 70px;
                  position: fixed;
                  top: 0;
                  width: 100%;
                  z-index: 1000;
              }

              .navbar.scrolled {
                  background-color: rgba(0, 0, 0, 0.9); /* 스크롤 시 배경색 */
              }

              .navbar img {
                  margin-left:70px;
                  height: 50px;
              }

              .nav-links {
                  display: flex;
                  align-items: center;


              }

              .nav-links a {
                  color: white;
                  text-decoration: none;
                  padding: 0 15px;
                  font-weight: bold;

              }

              .nav-links a:hover {
                  color: green;
              }

              /* 햄버거 메뉴 버튼 */
              #menuBtn {
                  width: 35px;
                  cursor: pointer;
                  z-index: 1001;
                  margin-right: 70px;
              }

              /* 사이드 메뉴 스타일 */
              .menuWrap {
                  position: fixed;
                  top: 0;
                  right: -500px; /* 메뉴 숨기기 */
                  z-index: 1000;
                  width: 320px;
                  height: 100%;
                  padding: 50px 20px;
                  box-sizing: border-box;
                  transition: right 0.3s ease-in-out;
                  background-color: #f0f0f0;

              }

              .menuWrap.on {
                  right: 0; /* 메뉴 열기 */
              }

              #dimmed {
                  position: fixed;
                  top: 0;
                  left: 0;
                  z-index: 999;
                  width: 100%;
                  height: 100%;
                  background-color: rgba(0, 0, 0, 0.5);
              }

              /* 메뉴 리스트 스타일 */
              .menuList {
                  list-style-type: none;
                  padding: 0;
              }

              .listStyle > a {
                  font-size: 20px;
                  color: green;
                  text-decoration: none;
                  display: block;
                  padding: 10px;
              }

              .listStyle ul {
                  list-style-type: none;
                  padding: 0;
                  margin-left: 20px;
              }


              .listStyle ul li a {
                  font-size: 16px;
                  color: #000;
                  text-decoration: none;
                  display: block;
                  padding: 7px 0;
              }

              .listStyle a:hover {
                  background-color: #f9f9f9;
              }

              .btnRotate {
                  transform: rotate(-90deg);
                  transition: all 0.3s ease-in-out;
              }

           #mid_inner {
               background-color: black;
               color:white;
           }



           /* 회원가입 양식 background-color: #f9f9f9; */
           .signup-form {
               width: 350px;
               margin:  auto;
               padding: 50px;
               border-radius: 10px;
               box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
               margin-top: 30px;


           }

           /* 제목 스타일 */
           .signup-form h1 {
               font-size: 30px;
               color: white;
               margin-bottom: 30px;
           }

           /* 입력 필드 스타일 */
           .signup-form input {
               width: 100%;
               height: 50px;
               padding: 0 10px;
               box-sizing: border-box;
               margin-bottom: 16px;
               border: 1px solid #ccc;
               border-radius: 6px;
                background-color: rgba(0, 0, 0, 0.3); /* 투명도를 30%로 설정 */
                color:white;
           }
           #email {
               margin-bottom: -5px;
               }

           /* 선택 필드 스타일 */
           .signup-form select {
               width: 100%;
               height: 40px;
               padding: 0px 10px;
               box-sizing: border-box;
               margin-bottom: 16px;
               border: 1px solid #ccc;
               border-radius: 6px;
               background-color: #F8F8F8;
               color:black;
           }

           /* 버튼 스타일 */
           .signup-form button {
               width: 100%;
               height: 40px;
               font-size: 16px;
               color: #fff;
               background-color: green;
               border: none;
               border-radius: 6px;
               cursor: pointer;
           }
           .signup-form button a {
               color: white;
           }


           /* 버튼 호버 효과 */
           .signup-form button:hover {
               background-color: #4D1AAB;
           }

        .join {
            color: black;
        }
       a {
           text-decoration-line: none;
           color: white;
       }
       .signup-form p {
           font-size: 11px;
           color:white;
       }
       .logo-img {
            width: 75px;  /* 너비를 150px로 설정 */
            height: 100px;  /* 높이를 자동으로 조절하여 이미지의 비율을 유지 */
            object-fit: cover; /* 이미지를 강제로 지정된 크기에 맞춥니다. */

        }

        /* 반응형 스타일 */
@media (max-width: 768px) {
    .navbar {
        padding: 8px 10px;
    }

    .navbar img {
        margin-left: 20px;
        height: 40px;
    }

    .nav-links a {
        padding: 0 10px;
    }

    #menuBtn {
        margin-right: 20px;
        width: 30px;
    }

    .menuWrap {
        width: 250px;
        padding: 40px 15px;
    }

    .signup-form {
        width: 90%;
        padding: 30px;
    }

    .signup-form h1 {
        font-size: 24px;
    }

    .signup-form input,
    .signup-form select,
    .signup-form button {
        height: 45px;
    }
}

@media (max-width: 480px) {
    .navbar {
        padding: 8px 5px;
    }

   .navbar img {
        height: 30px;
        margin-left: 10px;
    }

    .nav-links a {
        padding: 0 5px;
        font-size: 14px;
    }

    #menuBtn {
        width: 25px;
        margin-right: 10px;
    }

    .menuWrap {
        width: 200px;
        padding: 30px 10px;
    }

        .signup-form {
        width: 90%; /* Width adjusts to 90% of the viewport */
        padding: 40px; /* Slightly reduce padding */
    }

    .signup-form h1 {
        font-size: 28px; /* Slightly smaller title font size */
    }

    .signup-form input,
    .signup-form select {
        height: 45px; /* Reduce input field height */
        font-size: 14px; /* Adjust font size for inputs */
    }

    .signup-form button {
        height: 45px; /* Reduce button height */
        font-size: 14px; /* Adjust font size for button */
    }

    .signup-form p {
        font-size: 10px; /* Reduce paragraph font size */
    }
}

        @media (max-width: 340px) {

          .signup-form {
        width: 95%; /* Width adjusts to 95% of the viewport */
        padding: 30px; /* Further reduce padding */
    }

    .signup-form h1 {
        font-size: 26px; /* Even smaller title font size */
    }

    .signup-form input,
    .signup-form select {
        height: 40px; /* Further reduce input field height */
        font-size: 12px; /* Adjust font size for inputs */
    }

    .signup-form button {
        height: 40px; /* Further reduce button height */
        font-size: 12px; /* Adjust font size for button */
    }

    .signup-form p {
        font-size: 9px; /* Further reduce paragraph font size */
    }

    /* For screens smaller than 360px */

    html {
        font-size: 10px; /* 기본 폰트 크기 설정 */
    }

    .navbar {
        padding: 5px 6px; /* 내비게이션 바 패딩 조정 */
    }

   .navbar img {
        height: 23px;
    }

    .nav-links a {
        padding: 0 5px; /* 링크 패딩 줄이기 */
        font-size: 10px; /* 링크 폰트 크기 줄이기 */
    }

    #menuBtn {
        width: 18px; /* 메뉴 버튼 크기 조정 */
    }

    .menuWrap {
        width: 180px; /* 메뉴 폭 줄이기 */
        padding: 15px 6px; /* 메뉴 패딩 조정 */
    }
}

    </style>
</head>
    <body>
    <!-- 고정된 상단 메뉴바 -->
    <div class="navbar" id="navbar">
        <a th:href="@{/}"><img src="/img/ManliLogo3.png" alt="Logo" class="logo-img"></a>
        <div class="nav-links">
            <a th:href="@{/introduce}">About</a>
            <a th:href="@{/promotion}">Promotion</a>
            <a th:href="@{/program}">Program</a>
            <a th:href="@{/using}">Notice</a>
        </div>
        <!-- 햄버거 메뉴 버튼 -->
        <img id="menuBtn" src="/img/menuBtn1.png" alt="Menu Button">
        <!-- 사이드 메뉴 -->
        <div class="menuWrap" id="menu">
            <ul class="menuList">
                <li class="listStyle"><a th:href="@{/introduce}">About</a>
                    <ul class="intro">
                        <li><a th:href="@{/introduce}">헬스장 소개</a></li>
                        <li><a th:href="@{/come}">오시는길</a></li>
                    </ul>
                </li>
                <li class="listStyle"><a th:href="@{/program}">Program</a>
                    <ul class="pro">
                        <li><a th:href="@{/PT}">PM 프로그램</a></li>
                        <li><a th:href="@{/program}">운동 프로그램</a></li>
                    </ul>
                </li>
                <li class="listStyle"><a th:href="@{/promotion}">Promotion</a>
                    <ul class="eve"><!--프로모션은 가격표 올려두고 이벤트는 사진업로드-->
                        <li><a th:href="@{/promotion}">프로모션</a></li>
                        <li><a th:href="@{/event}">이벤트</a></li>
                    </ul>
                </li>
                <li class="listStyle"><a href="#">SNS</a>
                    <ul class="gi">
                        <li><a href="http://blog.naver.com/knhpallc">네이버 카페</a></li>
                        <li><a href="http://manligym24.modoo.at">만리 블로그</a></li>
                        <li><a href="http://instagram.com/manli_gym10002">인스타그램</a></li>
                        <li><a href="http://daangn.com/kr/business-profiles/793f009185a347c79cb449a884240c20/">당근</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>

    <script>
        window.addEventListener('scroll', function() {
            const navbar = document.getElementById('navbar');
            if (window.scrollY > 10) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
        const menuWrap = document.querySelector(".menuWrap");
        const menuBtn = document.querySelector("#menuBtn");

        // 메뉴 버튼 클릭 이벤트
        menuBtn.addEventListener("click", function (e) {
          toggleMenu();
        });

        // 빈 공간 클릭 시 메뉴 닫기
        document.addEventListener("click", function (e) {
          if (!menuWrap.contains(e.target) && e.target !== menuBtn) {
            closeMenu();
          }
        });

        function toggleMenu() {
          if (menuWrap.classList.contains("on")) {
            closeMenu();
          } else {
            openMenu();
          }
        }

        function openMenu() {
          menuWrap.classList.add("on");
          menuBtn.src = "/img/menuBtn1.png";
          menuBtn.classList.add("btnRotate");
          let div = document.createElement("div");
          div.id = "dimmed";
          document.body.append(div);

          // 페이지 스크롤 락, 모바일 이벤트 차단
          document.querySelector("#dimmed").addEventListener(
            "scroll touchmove touchend mousewheel",
            function (e) {
              e.preventDefault();
              e.stopPropagation();
              return false;
            }
          );
        }

        function closeMenu() {
          menuWrap.classList.remove("on");
          menuBtn.src = "/img/menuBtn1.png";
          menuBtn.classList.remove("btnRotate");
          document.querySelector("#dimmed").remove();
        }
      });
    </script>
            <div class="signup-form">
                <h1>회원가입</h1>
                <form th:action="@{/joinProc}" th:object="${user}" id="user" method="post">
                    <input type="text" th:field="*{useryd}" id="useryd" placeholder="아이디" required>
                    <button type="button" id="checkDuplicateBtn" onclick="checkDuplicateId()">중복검사</button> <!-- 중복검사 버튼 추가 -->
                    <p id="duplicateCheckResult"></p> <!-- 중복 검사 결과를 보여줄 부분 -->
                    <input type="text" th:field="*{username}" id="username" placeholder="이름" required>
                    <!-- 비밀번호 필드 및 실시간 유효성 검사 -->
                    <input type="password" th:field="*{password}" id="password" placeholder="비밀번호" required oninput="checkPassword()">
                    <p>※ 비밀번호는 10글자 이상이며, 숫자와 특수문자를 포함해야 합니다</p>
                    <p id="passwordValidationResult"></p> <!-- 실시간 비밀번호 검사 결과를 표시할 부분 -->

                    <select id="sex" th:field="*{sex}" >
                        <option value="male">남성</option>
                        <option value="female">여성</option>
                    </select>
                    <input type="date" th:field="*{bir}"  id="bir" placeholder="생년월일">
                    <input type="tel" th:field="*{phnum}"  id="phnum" placeholder="전화번호" required>
                    <input type="text" th:field="*{address}"  id="address" placeholder="주소" required>
                    <input type="email" th:field="*{email}"  id="email" placeholder="이메일" required>

                    <br><br><br><br>
                    <input type="submit" class="join" value="가입하기"/>
                </form>
            </div>

    <script>
        function checkDuplicateId() {
            const useryd = document.getElementById("useryd").value;
            if (!useryd) {
                alert("아이디를 입력해주세요.");
                return;
            }

            // AJAX 요청
            fetch(`/check-duplicate-id?useryd=${useryd}`)
                .then(response => response.json())
                .then(data => {
                    const resultElement = document.getElementById("duplicateCheckResult");
                    if (data.exists) {
                        resultElement.textContent = "이미 사용 중인 아이디입니다.";
                        resultElement.style.color = "red";
                    } else {
                        resultElement.textContent = "사용 가능한 아이디입니다.";
                        resultElement.style.color = "green";
                    }
                })
                .catch(error => {
                    console.error("중복검사 중 오류 발생:", error);
                });
        }
    </script>
    <script>
    // 비밀번호 패턴을 확인하는 함수
    function checkPassword() {
        const password = document.getElementById('password').value;
        const passwordPattern = /^(?=.*[0-9])(?=.*[!@#$%^&*(),.?":{}|<>]).{10,}$/;
        const validationResult = document.getElementById('passwordValidationResult');

    if (password.match(passwordPattern)) {
        validationResult.textContent = '비밀번호가 적합합니다.';
        validationResult.style.color = 'green';
        } else {
        validationResult.textContent = '비밀번호는 10글자 이상이며, 숫자와 특수문자를 포함해야 합니다.';
        validationResult.style.color = 'red';
    }
}
    </script>
    </body>
</html>